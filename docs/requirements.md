# メディア転送ツール 要件定義書

## 1. プロジェクト概要

### 1.1 目的
スマートフォン、デジタルカメラなどで撮影した写真・動画ファイルを、効率的にローカルストレージ、ファイルサーバー、クラウドストレージに整理・転送するユーティリティソフトウェアの開発。

### 1.2 背景
- 複数のデバイスで撮影された大量のメディアファイルの管理が煩雑
- 手動での整理・転送作業に時間がかかる
- ファイル名の重複や整理ルールの不統一による混乱
- バックアップの自動化ニーズ
- **特に動画ファイルの整理が困難**：写真はLightroomなどの専用ツールがあるが、動画は編集ソフトはあっても撮影データの整理機能が不足

## 2. ユーザー要件

### 2.1 対象ユーザー
- 写真・動画を頻繁に撮影する一般ユーザー
- 複数のデバイスを使用しているユーザー
- メディアファイルの整理・バックアップを効率化したいユーザー

### 2.2 ユースケース
1. **デバイスからの一括転送**
   - スマートフォン、カメラをPCに接続し、メディアファイルを一括転送
   
2. **自動整理**
   - 撮影日時、デバイス情報、場所情報などに基づいた自動フォルダ分け
   
3. **重複ファイル管理**
   - 既存ファイルとの重複チェック
   - 重複時の処理選択（スキップ、上書き、別名保存）
   
4. **マルチデスティネーション転送**
   - ローカル、NAS、クラウドへの同時転送

## 3. 機能要件

### 3.1 入力元（ソース）
- [x] **スマートフォン（iOS/Android）からの読み込み** - 高優先度
- [x] **デジタルカメラ（USB/SDカード）からの読み込み** - 高優先度
- [ ] ローカルフォルダからの読み込み
- [ ] ネットワークドライブからの読み込み

### 3.2 出力先（デスティネーション）
- [x] **ローカルストレージ** - 高優先度
- [ ] ネットワークドライブ（NAS、ファイルサーバー）
- [x] **クラウドストレージ** - 高優先度
  - [ ] Google Drive
  - [x] **OneDrive** - 高優先度
  - [x] **Dropbox** - 高優先度
  - [x] **Amazon S3** - 高優先度
  - [ ] その他

### 3.3 ファイル整理機能
- [x] **カスタムルールによる整理** - 最高優先度
  - [x] **ルールテンプレート機能** - 高優先度
  - [x] **条件分岐による整理** - 高優先度
  - [x] **複数ルールの組み合わせ** - 高優先度
- [ ] 日付別フォルダ作成（年/月/日） - テンプレートとして提供
- [ ] イベント別フォルダ作成 - テンプレートとして提供
- [ ] デバイス別フォルダ作成 - テンプレートとして提供
- [ ] ファイル形式別フォルダ作成（写真/動画） - テンプレートとして提供

### 3.4 ファイル処理機能
- [ ] メタデータ読み取り（EXIF情報など）
- [ ] ファイル名変更機能
  - [ ] 連番付与
  - [ ] 日時情報付与
  - [ ] カスタムプレフィックス/サフィックス
- [x] **重複ファイル検出** - 最高優先度（必須機能）
  - [x] **ハッシュ値による完全一致検出** - 最高優先度
  - [x] **ファイル名による検出** - 高優先度
  - [x] **類似画像検出** - 中優先度
  - [x] **重複時の処理選択** - 最高優先度
    - [x] スキップ
    - [x] 上書き
    - [x] 別名保存
    - [x] ユーザー選択
- [ ] ファイル変換機能（オプション）
  - [ ] 画像リサイズ
  - [ ] フォーマット変換

### 3.5 転送機能
- [ ] 転送進捗表示
- [ ] 転送速度制限
- [ ] 転送エラー処理とリトライ
- [ ] 転送ログ記録
- [ ] 差分転送（新規ファイルのみ）

### 3.6 ユーザーインターフェース
- [x] **GUI版** - 高優先度
  - [x] **ドラッグ＆ドロップ対応** - 高優先度
  - [x] **プレビュー機能** - 高優先度
  - [x] **転送前確認画面** - 高優先度
- [x] **CLI版（自動化用）** - 中優先度
  - [x] **定型処理の定義・実行機能** - 高優先度
  - [x] **設定プロファイル機能** - 高優先度
- [x] **ジョブ管理機能** - 高優先度
  - [ ] GUI上での定型処理作成
  - [ ] 作成したジョブのコマンド実行
  - [ ] スケジュール実行

## 4. 非機能要件

### 4.1 パフォーマンス
- [ ] 大量ファイル（10,000件以上）の処理対応
- [ ] 大容量ファイル（4GB以上の動画）の処理対応
- [ ] マルチスレッド処理による高速化

### 4.2 信頼性
- [ ] 転送中断時の再開機能
- [ ] データ整合性チェック
- [ ] エラー発生時の詳細ログ

### 4.3 使いやすさ
- [ ] 直感的なUI
- [ ] 初回セットアップウィザード
- [ ] 日本語対応

### 4.4 互換性
- [ ] OS: Windows 10/11, macOS, Linux
- [ ] ファイルシステム: NTFS, FAT32, exFAT, APFS, ext4

### 4.5 セキュリティ
- [ ] クラウドストレージの認証情報の安全な保存
- [ ] 転送時の暗号化（クラウド転送時）

## 5. 制約事項
- [ ] ライセンス関連の制約
- [ ] 使用可能なライブラリの制限
- [ ] クラウドストレージAPIの利用制限

## 6. 今後の検討事項
- [ ] 優先的に実装する機能の選定
- [ ] 使用する技術スタック
- [ ] 開発スケジュール
- [ ] ライセンス形態（オープンソース/商用）

## 7. 質問事項と回答
1. ✅ 主に使用するデバイスは何ですか？
   - **回答**: スマートフォン、デジタルカメラ
   
2. ✅ 優先的に対応してほしいクラウドストレージはありますか？
   - **回答**: Dropbox、OneDrive、Amazon S3
3. ✅ GUI/CLIどちらを優先しますか？
   - **回答**: GUI優先、ただし定型処理を定義してコマンドで実行できる機能も必要
4. ✅ ファイル整理のルールで特に重要なものは何ですか？
   - **回答**: 柔軟にカスタムできる機能、重複排除は必須
5. ✅ 既存の類似ツールで不満な点はありますか？
   - **回答**: 写真はLightroomなどがあるが、動画は編集ソフトはあっても撮影データ整理が煩雑